# PDF处理脚本说明

本目录包含用于构建和维护知识库的Python脚本。

## 脚本说明

### 1. `import_to_supabase.py`
- **用途**: 将处理好的文本数据导入到Supabase数据库
- **输入**: JSON格式的文本数据
- **输出**: Supabase knowledge_base表中的记录

### 2. `generate_embeddings.py`
- **用途**: 为知识库中的文本生成向量嵌入
- **功能**: 调用阿里云API生成1024维向量
- **注意**: 需要配置ALIBABA_API_KEY

### 3. `deduplicate_database.py`
- **用途**: 去除数据库中的重复记录
- **功能**: 基于内容相似度识别并删除重复项

### 4. `fix_and_import_remaining.py`
- **用途**: 处理和导入剩余的PDF数据
- **功能**: 修复数据格式问题并批量导入

## 使用场景

这些脚本在以下情况下有用：
1. 添加新的古籍到知识库
2. 更新现有内容的向量嵌入
3. 清理重复或错误的数据
4. 批量导入新的算命资料

## 运行环境

- Python 3.8+
- 需要安装的依赖包见各脚本文件
- 需要配置Supabase和阿里云API密钥

## 注意事项

- 运行前请备份现有数据
- API调用有频率限制，注意控制速率
- 向量生成会产生费用