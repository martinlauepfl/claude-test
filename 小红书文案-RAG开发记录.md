💡 想让你的AI拥有"专属知识库"吗？我用1402条古籍让AI算命先生学会引用原文，这个RAG技术真的香！

之前花了一晚上做了AI算命网站，这次用一周时间升级了RAG知识库，现在AI的回答有根有据，再也不是瞎编了！

⚠️ 注：这是通用的RAG部署教程，不限于玄学，任何知识领域都能用！

———

📚 **知识库准备**（7本古籍，共1402条知识点）：
- 《周公解梦》 → 617条解梦智慧
- 《易经[周易]》 → 111条易经精髓
- 《周易六十四卦全解》 → 133条卦象详解
- 《梅花易数-宋-邵雍》 → 98条占卜秘法
- 《面相手相》 → 245条相术知识
- 《十二星座运势解析》 → 127条星座运势
- 《风水学入门》 → 75条风水理论



🛠️ **技术栈**（全部免费或低成本）：
• 💻 前端：单HTML文件（75KB）
• ⚡ 后端：Supabase（免费额度）
• 🗄️ 向量数据库：Supabase pgvector
• 🤖 AI模型：qwen-max + text-embedding-v4
• 🌍 部署：GitHub Pages + Cloudflare加速

**总成本：<¥200/月**，学生党也能冲！



———

🚀 **三步部署流程**

**1️⃣ PDF文字识别**
交给Claude Code处理，一句话指令就帮我生成了1402条知识点的JSON文件！
✅ OCR识别 + 去重 + 格式化，全自动完成

**2️⃣ 向量化处理**
这里最关键！每条知识转成1024维向量：
• 用text-embedding-v4模型（阿里云）
• ⚠️ 注意：参数是dimension（单数）！
• 🚀 1400条数据仅需5分钟

**3️⃣ 创建检索系统**
在Supabase创建Edge Function：
• 写一个match_knowledge函数
• 用余弦相似度搜索
• 阈值设为0.5（亲测最佳）

代码直接问Claude Code就行，它会帮你写好！



———

🎪 **踩坑经验**（血泪教训！）

**坑1️⃣：相似度阈值**
• 一开始设0.75，啥都搜不到
• 调整到0.5后，效果完美！
• 建议：0.5-0.7之间测试

**坑2️⃣：401认证错误**
• 单独调用RAG函数总是401
• 解决：把RAG检索直接集成到ai-chat函数里
• 原因：跨函数调用认证问题

**坑3️⃣：参数名错误**
• dimensions（复数）❌
• dimension（单数）✅
• 就差一个字母，卡了我3天！😅



———

✨ **🎉 成果展示**：

**AI现在能：**
• 📜 回复时自动引用古籍原文
• 🏷️ 每句话标注出处，有根有据
• 📚 结尾显示「基于X条古籍记载」
• 🎯 用户：这个AI真的懂传统文化！

**实际效果：**
用户问："梦见蛇代表什么？"
AI答："梦见蛇是凶兆（《周公解梦》）"

———

💫 **想体验？搜索「玄机阁 AI算命」**
🔥 源码和完整教程都整理好了，记得点赞收藏～

如果你也喜欢用代码做一些有趣的事，点个赞让我看到你！

💬 有问题评论区见，知无不言！

#RAG教程 #AI知识库 #Supabase #通义千问 #独立开发 #技术分享 #ClaudeCode



      